                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.1.1 #7100 (Oct 29 2014) (Linux)
                              4 ; This file was generated Wed Dec  2 18:10:51 2015
                              5 ;--------------------------------------------------------
                              6 	.module framer_nullmac
                              7 	.optsdcc -mmcs51 --model-huge
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _framer_nullmac
                             13 	.globl _packetbuf_addr
                             14 	.globl _packetbuf_set_addr
                             15 	.globl _packetbuf_hdrreduce
                             16 	.globl _packetbuf_hdralloc
                             17 	.globl _packetbuf_hdrptr
                             18 	.globl _packetbuf_dataptr
                             19 	.globl _rimeaddr_copy
                             20 ;--------------------------------------------------------
                             21 ; special function registers
                             22 ;--------------------------------------------------------
                             23 	.area RSEG    (ABS,DATA)
   0000                      24 	.org 0x0000
                             25 ;--------------------------------------------------------
                             26 ; special function bits
                             27 ;--------------------------------------------------------
                             28 	.area RSEG    (ABS,DATA)
   0000                      29 	.org 0x0000
                             30 ;--------------------------------------------------------
                             31 ; overlayable register banks
                             32 ;--------------------------------------------------------
                             33 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      34 	.ds 8
                             35 ;--------------------------------------------------------
                             36 ; internal ram data
                             37 ;--------------------------------------------------------
                             38 	.area DSEG    (DATA)
                             39 ;--------------------------------------------------------
                             40 ; overlayable items in internal ram 
                             41 ;--------------------------------------------------------
                             42 	.area OSEG    (OVR,DATA)
                             43 ;--------------------------------------------------------
                             44 ; indirectly addressable internal ram data
                             45 ;--------------------------------------------------------
                             46 	.area ISEG    (DATA)
                             47 ;--------------------------------------------------------
                             48 ; absolute internal ram data
                             49 ;--------------------------------------------------------
                             50 	.area IABS    (ABS,DATA)
                             51 	.area IABS    (ABS,DATA)
                             52 ;--------------------------------------------------------
                             53 ; bit data
                             54 ;--------------------------------------------------------
                             55 	.area BSEG    (BIT)
                             56 ;--------------------------------------------------------
                             57 ; paged external ram data
                             58 ;--------------------------------------------------------
                             59 	.area PSEG    (PAG,XDATA)
                             60 ;--------------------------------------------------------
                             61 ; external ram data
                             62 ;--------------------------------------------------------
                             63 	.area XSEG    (XDATA)
                             64 ;--------------------------------------------------------
                             65 ; absolute external ram data
                             66 ;--------------------------------------------------------
                             67 	.area XABS    (ABS,XDATA)
                             68 ;--------------------------------------------------------
                             69 ; external initialized ram data
                             70 ;--------------------------------------------------------
                             71 	.area XISEG   (XDATA)
                             72 	.area HOME    (CODE)
                             73 	.area GSINIT0 (CODE)
                             74 	.area GSINIT1 (CODE)
                             75 	.area GSINIT2 (CODE)
                             76 	.area GSINIT3 (CODE)
                             77 	.area GSINIT4 (CODE)
                             78 	.area GSINIT5 (CODE)
                             79 	.area GSINIT  (CODE)
                             80 	.area GSFINAL (CODE)
                             81 	.area CSEG    (CODE)
                             82 ;--------------------------------------------------------
                             83 ; global & static initialisations
                             84 ;--------------------------------------------------------
                             85 	.area HOME    (CODE)
                             86 	.area GSINIT  (CODE)
                             87 	.area GSFINAL (CODE)
                             88 	.area GSINIT  (CODE)
                             89 ;--------------------------------------------------------
                             90 ; Home
                             91 ;--------------------------------------------------------
                             92 	.area HOME    (CODE)
                             93 	.area HOME    (CODE)
                             94 ;--------------------------------------------------------
                             95 ; code
                             96 ;--------------------------------------------------------
                             97 	.area BANK1   (CODE)
                             98 ;------------------------------------------------------------
                             99 ;Allocation info for local variables in function 'create'
                            100 ;------------------------------------------------------------
                            101 ;hdr                       Allocated to registers r5 r6 r7 
                            102 ;------------------------------------------------------------
                            103 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:60: create(void)
                            104 ;	-----------------------------------------
                            105 ;	 function create
                            106 ;	-----------------------------------------
   0000                     107 _create:
                    0007    108 	ar7 = 0x07
                    0006    109 	ar6 = 0x06
                    0005    110 	ar5 = 0x05
                    0004    111 	ar4 = 0x04
                    0003    112 	ar3 = 0x03
                    0002    113 	ar2 = 0x02
                    0001    114 	ar1 = 0x01
                    0000    115 	ar0 = 0x00
                            116 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:64: if(packetbuf_hdralloc(sizeof(struct nullmac_hdr))) {
   0000 90 00 10            117 	mov	dptr,#0x0010
   0003 78r00               118 	mov	r0,#_packetbuf_hdralloc
   0005 79s00               119 	mov	r1,#(_packetbuf_hdralloc >> 8)
   0007 7As00               120 	mov	r2,#(_packetbuf_hdralloc >> 16)
   0009 12s00r00            121 	lcall	__sdcc_banked_call
   000C E5 82               122 	mov	a,dpl
   000E 85 83 F0            123 	mov	b,dph
   0011 45 F0               124 	orl	a,b
   0013 60 76               125 	jz	00102$
                            126 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:65: hdr = packetbuf_hdrptr();
   0015 78r00               127 	mov	r0,#_packetbuf_hdrptr
   0017 79s00               128 	mov	r1,#(_packetbuf_hdrptr >> 8)
   0019 7As00               129 	mov	r2,#(_packetbuf_hdrptr >> 16)
   001B 12s00r00            130 	lcall	__sdcc_banked_call
   001E AD 82               131 	mov	r5,dpl
   0020 AE 83               132 	mov	r6,dph
   0022 AF F0               133 	mov	r7,b
                            134 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:66: rimeaddr_copy(&(hdr->sender), &rimeaddr_node_addr);
   0024 74 08               135 	mov	a,#0x08
   0026 2D                  136 	add	a,r5
   0027 FA                  137 	mov	r2,a
   0028 E4                  138 	clr	a
   0029 3E                  139 	addc	a,r6
   002A FB                  140 	mov	r3,a
   002B 8F 04               141 	mov	ar4,r7
   002D C0 07               142 	push	ar7
   002F C0 06               143 	push	ar6
   0031 C0 05               144 	push	ar5
   0033 74r00               145 	mov	a,#_rimeaddr_node_addr
   0035 C0 E0               146 	push	acc
   0037 74s00               147 	mov	a,#(_rimeaddr_node_addr >> 8)
   0039 C0 E0               148 	push	acc
   003B E4                  149 	clr	a
   003C C0 E0               150 	push	acc
   003E 8A 82               151 	mov	dpl,r2
   0040 8B 83               152 	mov	dph,r3
   0042 8C F0               153 	mov	b,r4
   0044 78r00               154 	mov	r0,#_rimeaddr_copy
   0046 79s00               155 	mov	r1,#(_rimeaddr_copy >> 8)
   0048 7As00               156 	mov	r2,#(_rimeaddr_copy >> 16)
   004A 12s00r00            157 	lcall	__sdcc_banked_call
   004D 15 81               158 	dec	sp
   004F 15 81               159 	dec	sp
   0051 15 81               160 	dec	sp
                            161 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:67: rimeaddr_copy(&(hdr->receiver), packetbuf_addr(PACKETBUF_ADDR_RECEIVER));
   0053 75 82 19            162 	mov	dpl,#0x19
   0056 78r00               163 	mov	r0,#_packetbuf_addr
   0058 79s00               164 	mov	r1,#(_packetbuf_addr >> 8)
   005A 7As00               165 	mov	r2,#(_packetbuf_addr >> 16)
   005C 12s00r00            166 	lcall	__sdcc_banked_call
   005F AA 82               167 	mov	r2,dpl
   0061 AB 83               168 	mov	r3,dph
   0063 AC F0               169 	mov	r4,b
   0065 D0 05               170 	pop	ar5
   0067 D0 06               171 	pop	ar6
   0069 D0 07               172 	pop	ar7
   006B C0 02               173 	push	ar2
   006D C0 03               174 	push	ar3
   006F C0 04               175 	push	ar4
   0071 8D 82               176 	mov	dpl,r5
   0073 8E 83               177 	mov	dph,r6
   0075 8F F0               178 	mov	b,r7
   0077 78r00               179 	mov	r0,#_rimeaddr_copy
   0079 79s00               180 	mov	r1,#(_rimeaddr_copy >> 8)
   007B 7As00               181 	mov	r2,#(_rimeaddr_copy >> 16)
   007D 12s00r00            182 	lcall	__sdcc_banked_call
   0080 15 81               183 	dec	sp
   0082 15 81               184 	dec	sp
   0084 15 81               185 	dec	sp
                            186 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:68: return sizeof(struct nullmac_hdr);
   0086 90 00 10            187 	mov	dptr,#0x0010
   0089 80 03               188 	sjmp	00103$
   008B                     189 00102$:
                            190 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:71: return FRAMER_FAILED;
   008B 90 FF FF            191 	mov	dptr,#0xFFFF
   008E                     192 00103$:
   008E 02s00r00            193 	ljmp	__sdcc_banked_ret
                            194 ;------------------------------------------------------------
                            195 ;Allocation info for local variables in function 'parse'
                            196 ;------------------------------------------------------------
                            197 ;hdr                       Allocated to registers r5 r6 r7 
                            198 ;------------------------------------------------------------
                            199 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:75: parse(void)
                            200 ;	-----------------------------------------
                            201 ;	 function parse
                            202 ;	-----------------------------------------
   0091                     203 _parse:
                            204 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:78: hdr = packetbuf_dataptr();
   0091 78r00               205 	mov	r0,#_packetbuf_dataptr
   0093 79s00               206 	mov	r1,#(_packetbuf_dataptr >> 8)
   0095 7As00               207 	mov	r2,#(_packetbuf_dataptr >> 16)
   0097 12s00r00            208 	lcall	__sdcc_banked_call
   009A AD 82               209 	mov	r5,dpl
   009C AE 83               210 	mov	r6,dph
   009E AF F0               211 	mov	r7,b
                            212 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:79: if(packetbuf_hdrreduce(sizeof(struct nullmac_hdr))) {
   00A0 90 00 10            213 	mov	dptr,#0x0010
   00A3 C0 07               214 	push	ar7
   00A5 C0 06               215 	push	ar6
   00A7 C0 05               216 	push	ar5
   00A9 78r00               217 	mov	r0,#_packetbuf_hdrreduce
   00AB 79s00               218 	mov	r1,#(_packetbuf_hdrreduce >> 8)
   00AD 7As00               219 	mov	r2,#(_packetbuf_hdrreduce >> 16)
   00AF 12s00r00            220 	lcall	__sdcc_banked_call
   00B2 E5 82               221 	mov	a,dpl
   00B4 85 83 F0            222 	mov	b,dph
   00B7 D0 05               223 	pop	ar5
   00B9 D0 06               224 	pop	ar6
   00BB D0 07               225 	pop	ar7
   00BD 45 F0               226 	orl	a,b
   00BF 60 4A               227 	jz	00102$
                            228 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:80: packetbuf_set_addr(PACKETBUF_ADDR_SENDER, &(hdr->sender));
   00C1 74 08               229 	mov	a,#0x08
   00C3 2D                  230 	add	a,r5
   00C4 FA                  231 	mov	r2,a
   00C5 E4                  232 	clr	a
   00C6 3E                  233 	addc	a,r6
   00C7 FB                  234 	mov	r3,a
   00C8 8F 04               235 	mov	ar4,r7
   00CA C0 07               236 	push	ar7
   00CC C0 06               237 	push	ar6
   00CE C0 05               238 	push	ar5
   00D0 C0 02               239 	push	ar2
   00D2 C0 03               240 	push	ar3
   00D4 C0 04               241 	push	ar4
   00D6 75 82 18            242 	mov	dpl,#0x18
   00D9 78r00               243 	mov	r0,#_packetbuf_set_addr
   00DB 79s00               244 	mov	r1,#(_packetbuf_set_addr >> 8)
   00DD 7As00               245 	mov	r2,#(_packetbuf_set_addr >> 16)
   00DF 12s00r00            246 	lcall	__sdcc_banked_call
   00E2 15 81               247 	dec	sp
   00E4 15 81               248 	dec	sp
   00E6 15 81               249 	dec	sp
   00E8 D0 05               250 	pop	ar5
   00EA D0 06               251 	pop	ar6
   00EC D0 07               252 	pop	ar7
                            253 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:81: packetbuf_set_addr(PACKETBUF_ADDR_RECEIVER, &(hdr->receiver));
   00EE C0 05               254 	push	ar5
   00F0 C0 06               255 	push	ar6
   00F2 C0 07               256 	push	ar7
   00F4 75 82 19            257 	mov	dpl,#0x19
   00F7 78r00               258 	mov	r0,#_packetbuf_set_addr
   00F9 79s00               259 	mov	r1,#(_packetbuf_set_addr >> 8)
   00FB 7As00               260 	mov	r2,#(_packetbuf_set_addr >> 16)
   00FD 12s00r00            261 	lcall	__sdcc_banked_call
   0100 15 81               262 	dec	sp
   0102 15 81               263 	dec	sp
   0104 15 81               264 	dec	sp
                            265 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:88: return sizeof(struct nullmac_hdr);
   0106 90 00 10            266 	mov	dptr,#0x0010
   0109 80 03               267 	sjmp	00103$
   010B                     268 00102$:
                            269 ;	../../../contiki-sensinode//core/net/mac/framer-nullmac.c:90: return FRAMER_FAILED;
   010B 90 FF FF            270 	mov	dptr,#0xFFFF
   010E                     271 00103$:
   010E 02s00r00            272 	ljmp	__sdcc_banked_ret
                            273 	.area CSEG    (CODE)
                            274 	.area CONST   (CODE)
   0000                     275 _framer_nullmac:
   0000r00s00s00            276 	.byte _create,(_create >> 8),(_create >> 16)
   0003r91s00s00            277 	.byte _parse,(_parse >> 8),(_parse >> 16)
                            278 	.area XINIT   (CODE)
                            279 	.area CABS    (ABS,CODE)
