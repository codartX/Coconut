                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.1.1 #7100 (Oct 29 2014) (Linux)
                              4 ; This file was generated Wed Dec  2 18:10:51 2015
                              5 ;--------------------------------------------------------
                              6 	.module framer_802154
                              7 	.optsdcc -mmcs51 --model-huge
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _framer_802154
                             13 	.globl _random_rand
                             14 	.globl _packetbuf_addr
                             15 	.globl _packetbuf_set_addr
                             16 	.globl _packetbuf_attr
                             17 	.globl _packetbuf_set_attr
                             18 	.globl _packetbuf_hdrreduce
                             19 	.globl _packetbuf_hdralloc
                             20 	.globl _packetbuf_datalen
                             21 	.globl _packetbuf_hdrptr
                             22 	.globl _packetbuf_dataptr
                             23 	.globl _frame802154_parse
                             24 	.globl _frame802154_create
                             25 	.globl _frame802154_hdrlen
                             26 	.globl _rimeaddr_cmp
                             27 	.globl _rimeaddr_copy
                             28 	.globl _memset
                             29 ;--------------------------------------------------------
                             30 ; special function registers
                             31 ;--------------------------------------------------------
                             32 	.area RSEG    (ABS,DATA)
   0000                      33 	.org 0x0000
                             34 ;--------------------------------------------------------
                             35 ; special function bits
                             36 ;--------------------------------------------------------
                             37 	.area RSEG    (ABS,DATA)
   0000                      38 	.org 0x0000
                             39 ;--------------------------------------------------------
                             40 ; overlayable register banks
                             41 ;--------------------------------------------------------
                             42 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      43 	.ds 8
                             44 ;--------------------------------------------------------
                             45 ; internal ram data
                             46 ;--------------------------------------------------------
                             47 	.area DSEG    (DATA)
                             48 ;--------------------------------------------------------
                             49 ; overlayable items in internal ram 
                             50 ;--------------------------------------------------------
                             51 	.area OSEG    (OVR,DATA)
                             52 ;--------------------------------------------------------
                             53 ; indirectly addressable internal ram data
                             54 ;--------------------------------------------------------
                             55 	.area ISEG    (DATA)
                             56 ;--------------------------------------------------------
                             57 ; absolute internal ram data
                             58 ;--------------------------------------------------------
                             59 	.area IABS    (ABS,DATA)
                             60 	.area IABS    (ABS,DATA)
                             61 ;--------------------------------------------------------
                             62 ; bit data
                             63 ;--------------------------------------------------------
                             64 	.area BSEG    (BIT)
                             65 ;--------------------------------------------------------
                             66 ; paged external ram data
                             67 ;--------------------------------------------------------
                             68 	.area PSEG    (PAG,XDATA)
                             69 ;--------------------------------------------------------
                             70 ; external ram data
                             71 ;--------------------------------------------------------
                             72 	.area XSEG    (XDATA)
   0000                      73 _mac_dsn:
   0000                      74 	.ds 1
   0001                      75 _frame:
   0001                      76 	.ds 49
   0032                      77 _len:
   0032                      78 	.ds 1
                             79 ;--------------------------------------------------------
                             80 ; absolute external ram data
                             81 ;--------------------------------------------------------
                             82 	.area XABS    (ABS,XDATA)
                             83 ;--------------------------------------------------------
                             84 ; external initialized ram data
                             85 ;--------------------------------------------------------
                             86 	.area XISEG   (XDATA)
   0000                      87 _initialized:
   0000                      88 	.ds 1
                             89 	.area HOME    (CODE)
                             90 	.area GSINIT0 (CODE)
                             91 	.area GSINIT1 (CODE)
                             92 	.area GSINIT2 (CODE)
                             93 	.area GSINIT3 (CODE)
                             94 	.area GSINIT4 (CODE)
                             95 	.area GSINIT5 (CODE)
                             96 	.area GSINIT  (CODE)
                             97 	.area GSFINAL (CODE)
                             98 	.area CSEG    (CODE)
                             99 ;--------------------------------------------------------
                            100 ; global & static initialisations
                            101 ;--------------------------------------------------------
                            102 	.area HOME    (CODE)
                            103 	.area GSINIT  (CODE)
                            104 	.area GSFINAL (CODE)
                            105 	.area GSINIT  (CODE)
                            106 ;--------------------------------------------------------
                            107 ; Home
                            108 ;--------------------------------------------------------
                            109 	.area HOME    (CODE)
                            110 	.area HOME    (CODE)
                            111 ;--------------------------------------------------------
                            112 ; code
                            113 ;--------------------------------------------------------
                            114 	.area BANK1   (CODE)
                            115 ;------------------------------------------------------------
                            116 ;Allocation info for local variables in function 'is_broadcast_addr'
                            117 ;------------------------------------------------------------
                            118 ;addr                      Allocated to stack - sp -5
                            119 ;mode                      Allocated to registers r7 
                            120 ;i                         Allocated to registers 
                            121 ;------------------------------------------------------------
                            122 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:68: is_broadcast_addr(uint8_t mode, uint8_t *addr)
                            123 ;	-----------------------------------------
                            124 ;	 function is_broadcast_addr
                            125 ;	-----------------------------------------
   0000                     126 _is_broadcast_addr:
                    0007    127 	ar7 = 0x07
                    0006    128 	ar6 = 0x06
                    0005    129 	ar5 = 0x05
                    0004    130 	ar4 = 0x04
                    0003    131 	ar3 = 0x03
                    0002    132 	ar2 = 0x02
                    0001    133 	ar1 = 0x01
                    0000    134 	ar0 = 0x00
   0000 AF 82               135 	mov	r7,dpl
                            136 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:70: int i = mode == FRAME802154_SHORTADDRMODE ? 2 : 8;
   0002 BF 02 04            137 	cjne	r7,#0x02,00108$
   0005 7F 02               138 	mov	r7,#0x02
   0007 80 02               139 	sjmp	00109$
   0009                     140 00108$:
   0009 7F 08               141 	mov	r7,#0x08
   000B                     142 00109$:
   000B 8F 06               143 	mov	ar6,r7
   000D 7F 00               144 	mov	r7,#0x00
                            145 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:71: while(i-- > 0) {
   000F                     146 00103$:
   000F 8E 04               147 	mov	ar4,r6
   0011 8F 05               148 	mov	ar5,r7
   0013 1E                  149 	dec	r6
   0014 BE FF 01            150 	cjne	r6,#0xFF,00120$
   0017 1F                  151 	dec	r7
   0018                     152 00120$:
   0018 C3                  153 	clr	c
   0019 E4                  154 	clr	a
   001A 9C                  155 	subb	a,r4
   001B E4                  156 	clr	a
   001C 64 80               157 	xrl	a,#0x80
   001E 8D F0               158 	mov	b,r5
   0020 63 F0 80            159 	xrl	b,#0x80
   0023 95 F0               160 	subb	a,b
   0025 50 23               161 	jnc	00105$
                            162 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:72: if(addr[i] != 0xff) {
   0027 E5 81               163 	mov	a,sp
   0029 24 FB               164 	add	a,#0xfb
   002B F8                  165 	mov	r0,a
   002C EE                  166 	mov	a,r6
   002D 26                  167 	add	a,@r0
   002E FB                  168 	mov	r3,a
   002F EF                  169 	mov	a,r7
   0030 08                  170 	inc	r0
   0031 36                  171 	addc	a,@r0
   0032 FC                  172 	mov	r4,a
   0033 08                  173 	inc	r0
   0034 86 05               174 	mov	ar5,@r0
   0036 8B 82               175 	mov	dpl,r3
   0038 8C 83               176 	mov	dph,r4
   003A 8D F0               177 	mov	b,r5
   003C 12s00r00            178 	lcall	__gptrget
   003F FB                  179 	mov	r3,a
   0040 BB FF 02            180 	cjne	r3,#0xFF,00122$
   0043 80 CA               181 	sjmp	00103$
   0045                     182 00122$:
                            183 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:73: return 0;
   0045 90 00 00            184 	mov	dptr,#0x0000
   0048 80 03               185 	sjmp	00106$
   004A                     186 00105$:
                            187 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:76: return 1;
   004A 90 00 01            188 	mov	dptr,#0x0001
   004D                     189 00106$:
   004D 02s00r00            190 	ljmp	__sdcc_banked_ret
                            191 ;------------------------------------------------------------
                            192 ;Allocation info for local variables in function 'create'
                            193 ;------------------------------------------------------------
                            194 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:80: create(void)
                            195 ;	-----------------------------------------
                            196 ;	 function create
                            197 ;	-----------------------------------------
   0050                     198 _create:
                            199 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:84: memset(&frame, 0, sizeof(frame));
   0050 74 31               200 	mov	a,#0x31
   0052 C0 E0               201 	push	acc
   0054 E4                  202 	clr	a
   0055 C0 E0               203 	push	acc
   0057 E4                  204 	clr	a
   0058 C0 E0               205 	push	acc
   005A 90s00r01            206 	mov	dptr,#_frame
   005D 75 F0 00            207 	mov	b,#0x00
   0060 78r00               208 	mov	r0,#_memset
   0062 79s00               209 	mov	r1,#(_memset >> 8)
   0064 7As00               210 	mov	r2,#(_memset >> 16)
   0066 12s00r00            211 	lcall	__sdcc_banked_call
   0069 15 81               212 	dec	sp
   006B 15 81               213 	dec	sp
   006D 15 81               214 	dec	sp
                            215 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:86: if(!initialized) {
   006F 90s00r00            216 	mov	dptr,#_initialized
   0072 E0                  217 	movx	a,@dptr
   0073 FF                  218 	mov	r7,a
   0074 70 1C               219 	jnz	00102$
                            220 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:87: initialized = 1;
   0076 90s00r00            221 	mov	dptr,#_initialized
   0079 74 01               222 	mov	a,#0x01
   007B F0                  223 	movx	@dptr,a
                            224 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:88: mac_dsn = random_rand() & 0xff;
   007C 78r00               225 	mov	r0,#_random_rand
   007E 79s00               226 	mov	r1,#(_random_rand >> 8)
   0080 7As00               227 	mov	r2,#(_random_rand >> 16)
   0082 12s00r00            228 	lcall	__sdcc_banked_call
   0085 E5 82               229 	mov	a,dpl
   0087 85 83 F0            230 	mov	b,dph
   008A FE                  231 	mov	r6,a
   008B 7F 00               232 	mov	r7,#0x00
   008D 90s00r00            233 	mov	dptr,#_mac_dsn
   0090 EE                  234 	mov	a,r6
   0091 F0                  235 	movx	@dptr,a
   0092                     236 00102$:
                            237 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:92: frame.fcf.frame_type = FRAME802154_DATAFRAME;
   0092 90s00r01            238 	mov	dptr,#_frame
   0095 74 01               239 	mov	a,#0x01
   0097 F0                  240 	movx	@dptr,a
                            241 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:93: frame.fcf.security_enabled = 0;
   0098 90s00r02            242 	mov	dptr,#(_frame + 0x0001)
   009B E4                  243 	clr	a
   009C F0                  244 	movx	@dptr,a
                            245 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:94: frame.fcf.frame_pending = packetbuf_attr(PACKETBUF_ATTR_PENDING);
   009D 75 82 12            246 	mov	dpl,#0x12
   00A0 78r00               247 	mov	r0,#_packetbuf_attr
   00A2 79s00               248 	mov	r1,#(_packetbuf_attr >> 8)
   00A4 7As00               249 	mov	r2,#(_packetbuf_attr >> 16)
   00A6 12s00r00            250 	lcall	__sdcc_banked_call
   00A9 AE 82               251 	mov	r6,dpl
   00AB 90s00r03            252 	mov	dptr,#(_frame + 0x0002)
   00AE EE                  253 	mov	a,r6
   00AF F0                  254 	movx	@dptr,a
                            255 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:95: if(rimeaddr_cmp(packetbuf_addr(PACKETBUF_ADDR_RECEIVER), &rimeaddr_null)) {
   00B0 75 82 19            256 	mov	dpl,#0x19
   00B3 78r00               257 	mov	r0,#_packetbuf_addr
   00B5 79s00               258 	mov	r1,#(_packetbuf_addr >> 8)
   00B7 7As00               259 	mov	r2,#(_packetbuf_addr >> 16)
   00B9 12s00r00            260 	lcall	__sdcc_banked_call
   00BC AD 82               261 	mov	r5,dpl
   00BE AE 83               262 	mov	r6,dph
   00C0 AF F0               263 	mov	r7,b
   00C2 74r00               264 	mov	a,#_rimeaddr_null
   00C4 C0 E0               265 	push	acc
   00C6 74s00               266 	mov	a,#(_rimeaddr_null >> 8)
   00C8 C0 E0               267 	push	acc
   00CA 74 80               268 	mov	a,#0x80
   00CC C0 E0               269 	push	acc
   00CE 8D 82               270 	mov	dpl,r5
   00D0 8E 83               271 	mov	dph,r6
   00D2 8F F0               272 	mov	b,r7
   00D4 78r00               273 	mov	r0,#_rimeaddr_cmp
   00D6 79s00               274 	mov	r1,#(_rimeaddr_cmp >> 8)
   00D8 7As00               275 	mov	r2,#(_rimeaddr_cmp >> 16)
   00DA 12s00r00            276 	lcall	__sdcc_banked_call
   00DD AE 82               277 	mov	r6,dpl
   00DF AF 83               278 	mov	r7,dph
   00E1 15 81               279 	dec	sp
   00E3 15 81               280 	dec	sp
   00E5 15 81               281 	dec	sp
   00E7 EE                  282 	mov	a,r6
   00E8 4F                  283 	orl	a,r7
   00E9 60 07               284 	jz	00104$
                            285 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:96: frame.fcf.ack_required = 0;
   00EB 90s00r04            286 	mov	dptr,#(_frame + 0x0003)
   00EE E4                  287 	clr	a
   00EF F0                  288 	movx	@dptr,a
   00F0 80 15               289 	sjmp	00105$
   00F2                     290 00104$:
                            291 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:98: frame.fcf.ack_required = packetbuf_attr(PACKETBUF_ATTR_MAC_ACK);
   00F2 75 82 0B            292 	mov	dpl,#0x0B
   00F5 78r00               293 	mov	r0,#_packetbuf_attr
   00F7 79s00               294 	mov	r1,#(_packetbuf_attr >> 8)
   00F9 7As00               295 	mov	r2,#(_packetbuf_attr >> 16)
   00FB 12s00r00            296 	lcall	__sdcc_banked_call
   00FE AE 82               297 	mov	r6,dpl
   0100 AF 83               298 	mov	r7,dph
   0102 90s00r04            299 	mov	dptr,#(_frame + 0x0003)
   0105 EE                  300 	mov	a,r6
   0106 F0                  301 	movx	@dptr,a
   0107                     302 00105$:
                            303 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:100: frame.fcf.panid_compression = 0;
   0107 90s00r05            304 	mov	dptr,#(_frame + 0x0004)
                            305 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:103: frame.fcf.frame_version = FRAME802154_IEEE802154_2003;
   010A E4                  306 	clr	a
   010B F0                  307 	movx	@dptr,a
   010C 90s00r07            308 	mov	dptr,#(_frame + 0x0006)
   010F F0                  309 	movx	@dptr,a
                            310 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:106: if(packetbuf_attr(PACKETBUF_ATTR_MAC_SEQNO)) {
   0110 75 82 0A            311 	mov	dpl,#0x0A
   0113 78r00               312 	mov	r0,#_packetbuf_attr
   0115 79s00               313 	mov	r1,#(_packetbuf_attr >> 8)
   0117 7As00               314 	mov	r2,#(_packetbuf_attr >> 16)
   0119 12s00r00            315 	lcall	__sdcc_banked_call
   011C E5 82               316 	mov	a,dpl
   011E 85 83 F0            317 	mov	b,dph
   0121 45 F0               318 	orl	a,b
   0123 60 17               319 	jz	00107$
                            320 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:107: frame.seq = packetbuf_attr(PACKETBUF_ATTR_MAC_SEQNO);
   0125 75 82 0A            321 	mov	dpl,#0x0A
   0128 78r00               322 	mov	r0,#_packetbuf_attr
   012A 79s00               323 	mov	r1,#(_packetbuf_attr >> 8)
   012C 7As00               324 	mov	r2,#(_packetbuf_attr >> 16)
   012E 12s00r00            325 	lcall	__sdcc_banked_call
   0131 AE 82               326 	mov	r6,dpl
   0133 AF 83               327 	mov	r7,dph
   0135 90s00r09            328 	mov	dptr,#(_frame + 0x0008)
   0138 EE                  329 	mov	a,r6
   0139 F0                  330 	movx	@dptr,a
   013A 80 25               331 	sjmp	00108$
   013C                     332 00107$:
                            333 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:109: frame.seq = mac_dsn++;
   013C 90s00r00            334 	mov	dptr,#_mac_dsn
   013F E0                  335 	movx	a,@dptr
   0140 FF                  336 	mov	r7,a
   0141 90s00r00            337 	mov	dptr,#_mac_dsn
   0144 04                  338 	inc	a
   0145 F0                  339 	movx	@dptr,a
   0146 90s00r09            340 	mov	dptr,#(_frame + 0x0008)
   0149 EF                  341 	mov	a,r7
   014A F0                  342 	movx	@dptr,a
                            343 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:110: packetbuf_set_attr(PACKETBUF_ATTR_MAC_SEQNO, frame.seq);
   014B 7E 00               344 	mov	r6,#0x00
   014D C0 07               345 	push	ar7
   014F C0 06               346 	push	ar6
   0151 75 82 0A            347 	mov	dpl,#0x0A
   0154 78r00               348 	mov	r0,#_packetbuf_set_attr
   0156 79s00               349 	mov	r1,#(_packetbuf_set_attr >> 8)
   0158 7As00               350 	mov	r2,#(_packetbuf_set_attr >> 16)
   015A 12s00r00            351 	lcall	__sdcc_banked_call
   015D 15 81               352 	dec	sp
   015F 15 81               353 	dec	sp
   0161                     354 00108$:
                            355 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:122: frame.fcf.src_addr_mode = FRAME802154_LONGADDRMODE;
   0161 90s00r08            356 	mov	dptr,#(_frame + 0x0007)
   0164 74 03               357 	mov	a,#0x03
   0166 F0                  358 	movx	@dptr,a
                            359 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:124: frame.dest_pid = IEEE802154_PANID;
   0167 90s00r0A            360 	mov	dptr,#(_frame + 0x0009)
   016A 74 49               361 	mov	a,#0x49
   016C F0                  362 	movx	@dptr,a
   016D A3                  363 	inc	dptr
   016E 74 54               364 	mov	a,#0x54
   0170 F0                  365 	movx	@dptr,a
                            366 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:130: if(rimeaddr_cmp(packetbuf_addr(PACKETBUF_ADDR_RECEIVER), &rimeaddr_null)) {
   0171 75 82 19            367 	mov	dpl,#0x19
   0174 78r00               368 	mov	r0,#_packetbuf_addr
   0176 79s00               369 	mov	r1,#(_packetbuf_addr >> 8)
   0178 7As00               370 	mov	r2,#(_packetbuf_addr >> 16)
   017A 12s00r00            371 	lcall	__sdcc_banked_call
   017D AD 82               372 	mov	r5,dpl
   017F AE 83               373 	mov	r6,dph
   0181 AF F0               374 	mov	r7,b
   0183 74r00               375 	mov	a,#_rimeaddr_null
   0185 C0 E0               376 	push	acc
   0187 74s00               377 	mov	a,#(_rimeaddr_null >> 8)
   0189 C0 E0               378 	push	acc
   018B 74 80               379 	mov	a,#0x80
   018D C0 E0               380 	push	acc
   018F 8D 82               381 	mov	dpl,r5
   0191 8E 83               382 	mov	dph,r6
   0193 8F F0               383 	mov	b,r7
   0195 78r00               384 	mov	r0,#_rimeaddr_cmp
   0197 79s00               385 	mov	r1,#(_rimeaddr_cmp >> 8)
   0199 7As00               386 	mov	r2,#(_rimeaddr_cmp >> 16)
   019B 12s00r00            387 	lcall	__sdcc_banked_call
   019E AE 82               388 	mov	r6,dpl
   01A0 AF 83               389 	mov	r7,dph
   01A2 15 81               390 	dec	sp
   01A4 15 81               391 	dec	sp
   01A6 15 81               392 	dec	sp
   01A8 EE                  393 	mov	a,r6
   01A9 4F                  394 	orl	a,r7
   01AA 60 14               395 	jz	00110$
                            396 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:132: frame.fcf.dest_addr_mode = FRAME802154_SHORTADDRMODE;
   01AC 90s00r06            397 	mov	dptr,#(_frame + 0x0005)
   01AF 74 02               398 	mov	a,#0x02
   01B1 F0                  399 	movx	@dptr,a
                            400 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:133: frame.dest_addr[0] = 0xFF;
   01B2 90s00r0C            401 	mov	dptr,#(_frame + 0x000b)
   01B5 74 FF               402 	mov	a,#0xFF
   01B7 F0                  403 	movx	@dptr,a
                            404 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:134: frame.dest_addr[1] = 0xFF;
   01B8 90s00r0D            405 	mov	dptr,#(_frame + 0x000c)
   01BB 74 FF               406 	mov	a,#0xFF
   01BD F0                  407 	movx	@dptr,a
   01BE 80 39               408 	sjmp	00111$
   01C0                     409 00110$:
                            410 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:138: packetbuf_addr(PACKETBUF_ADDR_RECEIVER));
   01C0 75 82 19            411 	mov	dpl,#0x19
   01C3 78r00               412 	mov	r0,#_packetbuf_addr
   01C5 79s00               413 	mov	r1,#(_packetbuf_addr >> 8)
   01C7 7As00               414 	mov	r2,#(_packetbuf_addr >> 16)
   01C9 12s00r00            415 	lcall	__sdcc_banked_call
   01CC AD 82               416 	mov	r5,dpl
   01CE AE 83               417 	mov	r6,dph
   01D0 AF F0               418 	mov	r7,b
                            419 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:137: rimeaddr_copy((rimeaddr_t *)&frame.dest_addr,
   01D2 7Br0C               420 	mov	r3,#(_frame + 0x000b)
   01D4 7Cs00               421 	mov	r4,#((_frame + 0x000b) >> 8)
   01D6 7A 00               422 	mov	r2,#0x00
   01D8 C0 05               423 	push	ar5
   01DA C0 06               424 	push	ar6
   01DC C0 07               425 	push	ar7
   01DE 8B 82               426 	mov	dpl,r3
   01E0 8C 83               427 	mov	dph,r4
   01E2 8A F0               428 	mov	b,r2
   01E4 78r00               429 	mov	r0,#_rimeaddr_copy
   01E6 79s00               430 	mov	r1,#(_rimeaddr_copy >> 8)
   01E8 7As00               431 	mov	r2,#(_rimeaddr_copy >> 16)
   01EA 12s00r00            432 	lcall	__sdcc_banked_call
   01ED 15 81               433 	dec	sp
   01EF 15 81               434 	dec	sp
   01F1 15 81               435 	dec	sp
                            436 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:143: frame.fcf.dest_addr_mode = FRAME802154_LONGADDRMODE;
   01F3 90s00r06            437 	mov	dptr,#(_frame + 0x0005)
   01F6 74 03               438 	mov	a,#0x03
   01F8 F0                  439 	movx	@dptr,a
   01F9                     440 00111$:
                            441 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:148: frame.src_pid = IEEE802154_PANID;
   01F9 90s00r14            442 	mov	dptr,#(_frame + 0x0013)
   01FC 74 49               443 	mov	a,#0x49
   01FE F0                  444 	movx	@dptr,a
   01FF A3                  445 	inc	dptr
   0200 74 54               446 	mov	a,#0x54
   0202 F0                  447 	movx	@dptr,a
                            448 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:154: rimeaddr_copy((rimeaddr_t *)&frame.src_addr, &rimeaddr_node_addr);
   0203 7Er16               449 	mov	r6,#(_frame + 0x0015)
   0205 7Fs00               450 	mov	r7,#((_frame + 0x0015) >> 8)
   0207 7D 00               451 	mov	r5,#0x00
   0209 74r00               452 	mov	a,#_rimeaddr_node_addr
   020B C0 E0               453 	push	acc
   020D 74s00               454 	mov	a,#(_rimeaddr_node_addr >> 8)
   020F C0 E0               455 	push	acc
   0211 E4                  456 	clr	a
   0212 C0 E0               457 	push	acc
   0214 8E 82               458 	mov	dpl,r6
   0216 8F 83               459 	mov	dph,r7
   0218 8D F0               460 	mov	b,r5
   021A 78r00               461 	mov	r0,#_rimeaddr_copy
   021C 79s00               462 	mov	r1,#(_rimeaddr_copy >> 8)
   021E 7As00               463 	mov	r2,#(_rimeaddr_copy >> 16)
   0220 12s00r00            464 	lcall	__sdcc_banked_call
   0223 15 81               465 	dec	sp
   0225 15 81               466 	dec	sp
   0227 15 81               467 	dec	sp
                            468 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:156: frame.payload = packetbuf_dataptr();
   0229 78r00               469 	mov	r0,#_packetbuf_dataptr
   022B 79s00               470 	mov	r1,#(_packetbuf_dataptr >> 8)
   022D 7As00               471 	mov	r2,#(_packetbuf_dataptr >> 16)
   022F 12s00r00            472 	lcall	__sdcc_banked_call
   0232 AD 82               473 	mov	r5,dpl
   0234 AE 83               474 	mov	r6,dph
   0236 AF F0               475 	mov	r7,b
   0238 90s00r2E            476 	mov	dptr,#(_frame + 0x002d)
   023B ED                  477 	mov	a,r5
   023C F0                  478 	movx	@dptr,a
   023D A3                  479 	inc	dptr
   023E EE                  480 	mov	a,r6
   023F F0                  481 	movx	@dptr,a
   0240 A3                  482 	inc	dptr
   0241 EF                  483 	mov	a,r7
   0242 F0                  484 	movx	@dptr,a
                            485 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:157: frame.payload_len = packetbuf_datalen();
   0243 78r00               486 	mov	r0,#_packetbuf_datalen
   0245 79s00               487 	mov	r1,#(_packetbuf_datalen >> 8)
   0247 7As00               488 	mov	r2,#(_packetbuf_datalen >> 16)
   0249 12s00r00            489 	lcall	__sdcc_banked_call
   024C AE 82               490 	mov	r6,dpl
   024E 90s00r31            491 	mov	dptr,#(_frame + 0x0030)
   0251 EE                  492 	mov	a,r6
   0252 F0                  493 	movx	@dptr,a
                            494 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:158: len = frame802154_hdrlen(&frame);
   0253 90s00r01            495 	mov	dptr,#_frame
   0256 75 F0 00            496 	mov	b,#0x00
   0259 78r00               497 	mov	r0,#_frame802154_hdrlen
   025B 79s00               498 	mov	r1,#(_frame802154_hdrlen >> 8)
   025D 7As00               499 	mov	r2,#(_frame802154_hdrlen >> 16)
   025F 12s00r00            500 	lcall	__sdcc_banked_call
   0262 AF 82               501 	mov	r7,dpl
   0264 90s00r32            502 	mov	dptr,#_len
   0267 EF                  503 	mov	a,r7
   0268 F0                  504 	movx	@dptr,a
                            505 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:159: if(packetbuf_hdralloc(len)) {
   0269 7E 00               506 	mov	r6,#0x00
   026B 8F 82               507 	mov	dpl,r7
   026D 8E 83               508 	mov	dph,r6
   026F 78r00               509 	mov	r0,#_packetbuf_hdralloc
   0271 79s00               510 	mov	r1,#(_packetbuf_hdralloc >> 8)
   0273 7As00               511 	mov	r2,#(_packetbuf_hdralloc >> 16)
   0275 12s00r00            512 	lcall	__sdcc_banked_call
   0278 E5 82               513 	mov	a,dpl
   027A 85 83 F0            514 	mov	b,dph
   027D 45 F0               515 	orl	a,b
   027F 60 3D               516 	jz	00113$
                            517 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:160: frame802154_create(&frame, packetbuf_hdrptr(), len);
   0281 78r00               518 	mov	r0,#_packetbuf_hdrptr
   0283 79s00               519 	mov	r1,#(_packetbuf_hdrptr >> 8)
   0285 7As00               520 	mov	r2,#(_packetbuf_hdrptr >> 16)
   0287 12s00r00            521 	lcall	__sdcc_banked_call
   028A AD 82               522 	mov	r5,dpl
   028C AE 83               523 	mov	r6,dph
   028E AF F0               524 	mov	r7,b
   0290 90s00r32            525 	mov	dptr,#_len
   0293 E0                  526 	movx	a,@dptr
   0294 C0 E0               527 	push	acc
   0296 C0 05               528 	push	ar5
   0298 C0 06               529 	push	ar6
   029A C0 07               530 	push	ar7
   029C 90s00r01            531 	mov	dptr,#_frame
   029F 75 F0 00            532 	mov	b,#0x00
   02A2 78r00               533 	mov	r0,#_frame802154_create
   02A4 79s00               534 	mov	r1,#(_frame802154_create >> 8)
   02A6 7As00               535 	mov	r2,#(_frame802154_create >> 16)
   02A8 12s00r00            536 	lcall	__sdcc_banked_call
   02AB E5 81               537 	mov	a,sp
   02AD 24 FC               538 	add	a,#0xfc
   02AF F5 81               539 	mov	sp,a
                            540 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:166: return len;
   02B1 90s00r32            541 	mov	dptr,#_len
   02B4 E0                  542 	movx	a,@dptr
   02B5 FF                  543 	mov	r7,a
   02B6 7E 00               544 	mov	r6,#0x00
   02B8 8F 82               545 	mov	dpl,r7
   02BA 8E 83               546 	mov	dph,r6
   02BC 80 03               547 	sjmp	00115$
   02BE                     548 00113$:
                            549 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:169: return FRAMER_FAILED;
   02BE 90 FF FF            550 	mov	dptr,#0xFFFF
   02C1                     551 00115$:
   02C1 02s00r00            552 	ljmp	__sdcc_banked_ret
                            553 ;------------------------------------------------------------
                            554 ;Allocation info for local variables in function 'parse'
                            555 ;------------------------------------------------------------
                            556 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:174: parse(void)
                            557 ;	-----------------------------------------
                            558 ;	 function parse
                            559 ;	-----------------------------------------
   02C4                     560 _parse:
                            561 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:176: len = packetbuf_datalen();
   02C4 78r00               562 	mov	r0,#_packetbuf_datalen
   02C6 79s00               563 	mov	r1,#(_packetbuf_datalen >> 8)
   02C8 7As00               564 	mov	r2,#(_packetbuf_datalen >> 16)
   02CA 12s00r00            565 	lcall	__sdcc_banked_call
   02CD AE 82               566 	mov	r6,dpl
   02CF 90s00r32            567 	mov	dptr,#_len
   02D2 EE                  568 	mov	a,r6
   02D3 F0                  569 	movx	@dptr,a
                            570 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:177: if(frame802154_parse(packetbuf_dataptr(), len, &frame) &&
   02D4 C0 06               571 	push	ar6
   02D6 78r00               572 	mov	r0,#_packetbuf_dataptr
   02D8 79s00               573 	mov	r1,#(_packetbuf_dataptr >> 8)
   02DA 7As00               574 	mov	r2,#(_packetbuf_dataptr >> 16)
   02DC 12s00r00            575 	lcall	__sdcc_banked_call
   02DF AC 82               576 	mov	r4,dpl
   02E1 AD 83               577 	mov	r5,dph
   02E3 AF F0               578 	mov	r7,b
   02E5 D0 06               579 	pop	ar6
   02E7 74r01               580 	mov	a,#_frame
   02E9 C0 E0               581 	push	acc
   02EB 74s00               582 	mov	a,#(_frame >> 8)
   02ED C0 E0               583 	push	acc
   02EF E4                  584 	clr	a
   02F0 C0 E0               585 	push	acc
   02F2 C0 06               586 	push	ar6
   02F4 8C 82               587 	mov	dpl,r4
   02F6 8D 83               588 	mov	dph,r5
   02F8 8F F0               589 	mov	b,r7
   02FA 78r00               590 	mov	r0,#_frame802154_parse
   02FC 79s00               591 	mov	r1,#(_frame802154_parse >> 8)
   02FE 7As00               592 	mov	r2,#(_frame802154_parse >> 16)
   0300 12s00r00            593 	lcall	__sdcc_banked_call
   0303 AF 82               594 	mov	r7,dpl
   0305 E5 81               595 	mov	a,sp
   0307 24 FC               596 	add	a,#0xfc
   0309 F5 81               597 	mov	sp,a
   030B EF                  598 	mov	a,r7
   030C 70 03               599 	jnz	00125$
   030E 02s04r18            600 	ljmp	00109$
   0311                     601 00125$:
                            602 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:178: packetbuf_hdrreduce(len - frame.payload_len)) {
   0311 90s00r32            603 	mov	dptr,#_len
   0314 E0                  604 	movx	a,@dptr
   0315 FF                  605 	mov	r7,a
   0316 7E 00               606 	mov	r6,#0x00
   0318 90s00r31            607 	mov	dptr,#(_frame + 0x0030)
   031B E0                  608 	movx	a,@dptr
   031C FD                  609 	mov	r5,a
   031D 7C 00               610 	mov	r4,#0x00
   031F EF                  611 	mov	a,r7
   0320 C3                  612 	clr	c
   0321 9D                  613 	subb	a,r5
   0322 FF                  614 	mov	r7,a
   0323 EE                  615 	mov	a,r6
   0324 9C                  616 	subb	a,r4
   0325 FE                  617 	mov	r6,a
   0326 8F 82               618 	mov	dpl,r7
   0328 8E 83               619 	mov	dph,r6
   032A 78r00               620 	mov	r0,#_packetbuf_hdrreduce
   032C 79s00               621 	mov	r1,#(_packetbuf_hdrreduce >> 8)
   032E 7As00               622 	mov	r2,#(_packetbuf_hdrreduce >> 16)
   0330 12s00r00            623 	lcall	__sdcc_banked_call
   0333 E5 82               624 	mov	a,dpl
   0335 85 83 F0            625 	mov	b,dph
   0338 45 F0               626 	orl	a,b
   033A 70 03               627 	jnz	00126$
   033C 02s04r18            628 	ljmp	00109$
   033F                     629 00126$:
                            630 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:179: if(frame.fcf.dest_addr_mode) {
   033F 90s00r06            631 	mov	dptr,#(_frame + 0x0005)
   0342 E0                  632 	movx	a,@dptr
   0343 60 64               633 	jz	00107$
                            634 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:180: if(frame.dest_pid != IEEE802154_PANID &&
   0345 90s00r0A            635 	mov	dptr,#(_frame + 0x0009)
   0348 E0                  636 	movx	a,@dptr
   0349 FE                  637 	mov	r6,a
   034A A3                  638 	inc	dptr
   034B E0                  639 	movx	a,@dptr
   034C FF                  640 	mov	r7,a
   034D BE 49 05            641 	cjne	r6,#0x49,00128$
   0350 BF 54 02            642 	cjne	r7,#0x54,00128$
   0353 80 0E               643 	sjmp	00102$
   0355                     644 00128$:
                            645 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:181: frame.dest_pid != FRAME802154_BROADCASTPANDID) {
   0355 BE FF 05            646 	cjne	r6,#0xFF,00129$
   0358 BF FF 02            647 	cjne	r7,#0xFF,00129$
   035B 80 06               648 	sjmp	00102$
   035D                     649 00129$:
                            650 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:184: return FRAMER_FAILED;
   035D 90 FF FF            651 	mov	dptr,#0xFFFF
   0360 02s04r1B            652 	ljmp	00111$
   0363                     653 00102$:
                            654 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:186: if(!is_broadcast_addr(frame.fcf.dest_addr_mode, frame.dest_addr)) {
   0363 90s00r06            655 	mov	dptr,#(_frame + 0x0005)
   0366 E0                  656 	movx	a,@dptr
   0367 FF                  657 	mov	r7,a
   0368 74r0C               658 	mov	a,#(_frame + 0x000b)
   036A C0 E0               659 	push	acc
   036C 74s00               660 	mov	a,#((_frame + 0x000b) >> 8)
   036E C0 E0               661 	push	acc
   0370 E4                  662 	clr	a
   0371 C0 E0               663 	push	acc
   0373 8F 82               664 	mov	dpl,r7
   0375 78r00               665 	mov	r0,#_is_broadcast_addr
   0377 79s00               666 	mov	r1,#(_is_broadcast_addr >> 8)
   0379 7As00               667 	mov	r2,#(_is_broadcast_addr >> 16)
   037B 12s00r00            668 	lcall	__sdcc_banked_call
   037E AE 82               669 	mov	r6,dpl
   0380 AF 83               670 	mov	r7,dph
   0382 15 81               671 	dec	sp
   0384 15 81               672 	dec	sp
   0386 15 81               673 	dec	sp
   0388 EE                  674 	mov	a,r6
   0389 4F                  675 	orl	a,r7
                            676 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:187: packetbuf_set_addr(PACKETBUF_ADDR_RECEIVER, (rimeaddr_t *)&frame.dest_addr);
   038A 70 1D               677 	jnz	00107$
   038C 7Er0C               678 	mov	r6,#(_frame + 0x000b)
   038E 7Fs00               679 	mov	r7,#((_frame + 0x000b) >> 8)
   0390 FD                  680 	mov	r5,a
   0391 C0 06               681 	push	ar6
   0393 C0 07               682 	push	ar7
   0395 C0 05               683 	push	ar5
   0397 75 82 19            684 	mov	dpl,#0x19
   039A 78r00               685 	mov	r0,#_packetbuf_set_addr
   039C 79s00               686 	mov	r1,#(_packetbuf_set_addr >> 8)
   039E 7As00               687 	mov	r2,#(_packetbuf_set_addr >> 16)
   03A0 12s00r00            688 	lcall	__sdcc_banked_call
   03A3 15 81               689 	dec	sp
   03A5 15 81               690 	dec	sp
   03A7 15 81               691 	dec	sp
   03A9                     692 00107$:
                            693 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:190: packetbuf_set_addr(PACKETBUF_ADDR_SENDER, (rimeaddr_t *)&frame.src_addr);
   03A9 7Er16               694 	mov	r6,#(_frame + 0x0015)
   03AB 7Fs00               695 	mov	r7,#((_frame + 0x0015) >> 8)
   03AD 7D 00               696 	mov	r5,#0x00
   03AF C0 06               697 	push	ar6
   03B1 C0 07               698 	push	ar7
   03B3 C0 05               699 	push	ar5
   03B5 75 82 18            700 	mov	dpl,#0x18
   03B8 78r00               701 	mov	r0,#_packetbuf_set_addr
   03BA 79s00               702 	mov	r1,#(_packetbuf_set_addr >> 8)
   03BC 7As00               703 	mov	r2,#(_packetbuf_set_addr >> 16)
   03BE 12s00r00            704 	lcall	__sdcc_banked_call
   03C1 15 81               705 	dec	sp
   03C3 15 81               706 	dec	sp
   03C5 15 81               707 	dec	sp
                            708 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:191: packetbuf_set_attr(PACKETBUF_ATTR_PENDING, frame.fcf.frame_pending);
   03C7 90s00r03            709 	mov	dptr,#(_frame + 0x0002)
   03CA E0                  710 	movx	a,@dptr
   03CB FF                  711 	mov	r7,a
   03CC 7E 00               712 	mov	r6,#0x00
   03CE C0 07               713 	push	ar7
   03D0 C0 06               714 	push	ar6
   03D2 75 82 12            715 	mov	dpl,#0x12
   03D5 78r00               716 	mov	r0,#_packetbuf_set_attr
   03D7 79s00               717 	mov	r1,#(_packetbuf_set_attr >> 8)
   03D9 7As00               718 	mov	r2,#(_packetbuf_set_attr >> 16)
   03DB 12s00r00            719 	lcall	__sdcc_banked_call
   03DE 15 81               720 	dec	sp
   03E0 15 81               721 	dec	sp
                            722 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:193: packetbuf_set_attr(PACKETBUF_ATTR_PACKET_ID, frame.seq);
   03E2 90s00r09            723 	mov	dptr,#(_frame + 0x0008)
   03E5 E0                  724 	movx	a,@dptr
   03E6 FF                  725 	mov	r7,a
   03E7 7E 00               726 	mov	r6,#0x00
   03E9 C0 07               727 	push	ar7
   03EB C0 06               728 	push	ar6
   03ED 75 82 0D            729 	mov	dpl,#0x0D
   03F0 78r00               730 	mov	r0,#_packetbuf_set_attr
   03F2 79s00               731 	mov	r1,#(_packetbuf_set_attr >> 8)
   03F4 7As00               732 	mov	r2,#(_packetbuf_set_attr >> 16)
   03F6 12s00r00            733 	lcall	__sdcc_banked_call
   03F9 15 81               734 	dec	sp
   03FB 15 81               735 	dec	sp
                            736 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:200: return len - frame.payload_len;
   03FD 90s00r32            737 	mov	dptr,#_len
   0400 E0                  738 	movx	a,@dptr
   0401 FF                  739 	mov	r7,a
   0402 7E 00               740 	mov	r6,#0x00
   0404 90s00r31            741 	mov	dptr,#(_frame + 0x0030)
   0407 E0                  742 	movx	a,@dptr
   0408 FD                  743 	mov	r5,a
   0409 7C 00               744 	mov	r4,#0x00
   040B EF                  745 	mov	a,r7
   040C C3                  746 	clr	c
   040D 9D                  747 	subb	a,r5
   040E FF                  748 	mov	r7,a
   040F EE                  749 	mov	a,r6
   0410 9C                  750 	subb	a,r4
   0411 FE                  751 	mov	r6,a
   0412 8F 82               752 	mov	dpl,r7
   0414 8E 83               753 	mov	dph,r6
   0416 80 03               754 	sjmp	00111$
   0418                     755 00109$:
                            756 ;	../../../contiki-sensinode//core/net/mac/framer-802154.c:202: return FRAMER_FAILED;
   0418 90 FF FF            757 	mov	dptr,#0xFFFF
   041B                     758 00111$:
   041B 02s00r00            759 	ljmp	__sdcc_banked_ret
                            760 	.area CSEG    (CODE)
                            761 	.area CONST   (CODE)
   0000                     762 _framer_802154:
   0000r50s00s00            763 	.byte _create,(_create >> 8),(_create >> 16)
   0003rC4s02s00            764 	.byte _parse,(_parse >> 8),(_parse >> 16)
                            765 	.area XINIT   (CODE)
   0000                     766 __xinit__initialized:
   0000 00                  767 	.db #0x00	; 0
                            768 	.area CABS    (ABS,CODE)
