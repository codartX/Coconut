                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.1.1 #7100 (Oct 29 2014) (Linux)
                              4 ; This file was generated Wed Dec  2 18:10:57 2015
                              5 ;--------------------------------------------------------
                              6 	.module crc16
                              7 	.optsdcc -mmcs51 --model-huge
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _crc16_data
                             13 	.globl _crc16_add
                             14 ;--------------------------------------------------------
                             15 ; special function registers
                             16 ;--------------------------------------------------------
                             17 	.area RSEG    (ABS,DATA)
   0000                      18 	.org 0x0000
                             19 ;--------------------------------------------------------
                             20 ; special function bits
                             21 ;--------------------------------------------------------
                             22 	.area RSEG    (ABS,DATA)
   0000                      23 	.org 0x0000
                             24 ;--------------------------------------------------------
                             25 ; overlayable register banks
                             26 ;--------------------------------------------------------
                             27 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      28 	.ds 8
                             29 ;--------------------------------------------------------
                             30 ; internal ram data
                             31 ;--------------------------------------------------------
                             32 	.area DSEG    (DATA)
                             33 ;--------------------------------------------------------
                             34 ; overlayable items in internal ram 
                             35 ;--------------------------------------------------------
                             36 	.area OSEG    (OVR,DATA)
                             37 ;--------------------------------------------------------
                             38 ; indirectly addressable internal ram data
                             39 ;--------------------------------------------------------
                             40 	.area ISEG    (DATA)
                             41 ;--------------------------------------------------------
                             42 ; absolute internal ram data
                             43 ;--------------------------------------------------------
                             44 	.area IABS    (ABS,DATA)
                             45 	.area IABS    (ABS,DATA)
                             46 ;--------------------------------------------------------
                             47 ; bit data
                             48 ;--------------------------------------------------------
                             49 	.area BSEG    (BIT)
                             50 ;--------------------------------------------------------
                             51 ; paged external ram data
                             52 ;--------------------------------------------------------
                             53 	.area PSEG    (PAG,XDATA)
                             54 ;--------------------------------------------------------
                             55 ; external ram data
                             56 ;--------------------------------------------------------
                             57 	.area XSEG    (XDATA)
                             58 ;--------------------------------------------------------
                             59 ; absolute external ram data
                             60 ;--------------------------------------------------------
                             61 	.area XABS    (ABS,XDATA)
                             62 ;--------------------------------------------------------
                             63 ; external initialized ram data
                             64 ;--------------------------------------------------------
                             65 	.area XISEG   (XDATA)
                             66 	.area HOME    (CODE)
                             67 	.area GSINIT0 (CODE)
                             68 	.area GSINIT1 (CODE)
                             69 	.area GSINIT2 (CODE)
                             70 	.area GSINIT3 (CODE)
                             71 	.area GSINIT4 (CODE)
                             72 	.area GSINIT5 (CODE)
                             73 	.area GSINIT  (CODE)
                             74 	.area GSFINAL (CODE)
                             75 	.area CSEG    (CODE)
                             76 ;--------------------------------------------------------
                             77 ; global & static initialisations
                             78 ;--------------------------------------------------------
                             79 	.area HOME    (CODE)
                             80 	.area GSINIT  (CODE)
                             81 	.area GSFINAL (CODE)
                             82 	.area GSINIT  (CODE)
                             83 ;--------------------------------------------------------
                             84 ; Home
                             85 ;--------------------------------------------------------
                             86 	.area HOME    (CODE)
                             87 	.area HOME    (CODE)
                             88 ;--------------------------------------------------------
                             89 ; code
                             90 ;--------------------------------------------------------
                             91 	.area BANK1   (CODE)
                             92 ;------------------------------------------------------------
                             93 ;Allocation info for local variables in function 'crc16_add'
                             94 ;------------------------------------------------------------
                             95 ;acc                       Allocated to stack - sp -4
                             96 ;b                         Allocated to registers r7 
                             97 ;------------------------------------------------------------
                             98 ;	../../../contiki-sensinode//core/lib/crc16.c:47: crc16_add(unsigned char b, unsigned short acc)
                             99 ;	-----------------------------------------
                            100 ;	 function crc16_add
                            101 ;	-----------------------------------------
   0000                     102 _crc16_add:
                    0007    103 	ar7 = 0x07
                    0006    104 	ar6 = 0x06
                    0005    105 	ar5 = 0x05
                    0004    106 	ar4 = 0x04
                    0003    107 	ar3 = 0x03
                    0002    108 	ar2 = 0x02
                    0001    109 	ar1 = 0x01
                    0000    110 	ar0 = 0x00
   0000 AF 82               111 	mov	r7,dpl
                            112 ;	../../../contiki-sensinode//core/lib/crc16.c:57: acc ^= b;
   0002 7E 00               113 	mov	r6,#0x00
   0004 E5 81               114 	mov	a,sp
   0006 24 FC               115 	add	a,#0xfc
   0008 F8                  116 	mov	r0,a
   0009 EF                  117 	mov	a,r7
   000A 66                  118 	xrl	a,@r0
   000B F6                  119 	mov	@r0,a
   000C EE                  120 	mov	a,r6
   000D 08                  121 	inc	r0
   000E 66                  122 	xrl	a,@r0
   000F F6                  123 	mov	@r0,a
                            124 ;	../../../contiki-sensinode//core/lib/crc16.c:58: acc  = (acc >> 8) | (acc << 8);
   0010 E5 81               125 	mov	a,sp
   0012 24 FC               126 	add	a,#0xfc
   0014 F8                  127 	mov	r0,a
   0015 E6                  128 	mov	a,@r0
   0016 08                  129 	inc	r0
   0017 18                  130 	dec	r0
   0018 E6                  131 	mov	a,@r0
   0019 F6                  132 	mov	@r0,a
   001A 08                  133 	inc	r0
   001B F6                  134 	mov	@r0,a
                            135 ;	../../../contiki-sensinode//core/lib/crc16.c:59: acc ^= (acc & 0xff00) << 4;
   001C E5 81               136 	mov	a,sp
   001E 24 FC               137 	add	a,#0xfc
   0020 F8                  138 	mov	r0,a
   0021 7E 00               139 	mov	r6,#0x00
   0023 08                  140 	inc	r0
   0024 E6                  141 	mov	a,@r0
   0025 C4                  142 	swap	a
   0026 54 F0               143 	anl	a,#0xF0
   0028 CE                  144 	xch	a,r6
   0029 C4                  145 	swap	a
   002A CE                  146 	xch	a,r6
   002B 6E                  147 	xrl	a,r6
   002C CE                  148 	xch	a,r6
   002D 54 F0               149 	anl	a,#0xF0
   002F CE                  150 	xch	a,r6
   0030 6E                  151 	xrl	a,r6
   0031 FF                  152 	mov	r7,a
   0032 E5 81               153 	mov	a,sp
   0034 24 FC               154 	add	a,#0xfc
   0036 F8                  155 	mov	r0,a
   0037 EE                  156 	mov	a,r6
   0038 66                  157 	xrl	a,@r0
   0039 F6                  158 	mov	@r0,a
   003A EF                  159 	mov	a,r7
   003B 08                  160 	inc	r0
   003C 66                  161 	xrl	a,@r0
   003D F6                  162 	mov	@r0,a
                            163 ;	../../../contiki-sensinode//core/lib/crc16.c:60: acc ^= (acc >> 8) >> 4;
   003E E5 81               164 	mov	a,sp
   0040 24 FC               165 	add	a,#0xfc
   0042 F8                  166 	mov	r0,a
   0043 08                  167 	inc	r0
   0044 86 06               168 	mov	ar6,@r0
   0046 E4                  169 	clr	a
   0047 C4                  170 	swap	a
   0048 CE                  171 	xch	a,r6
   0049 C4                  172 	swap	a
   004A 54 0F               173 	anl	a,#0x0F
   004C 6E                  174 	xrl	a,r6
   004D CE                  175 	xch	a,r6
   004E 54 0F               176 	anl	a,#0x0F
   0050 CE                  177 	xch	a,r6
   0051 6E                  178 	xrl	a,r6
   0052 CE                  179 	xch	a,r6
   0053 FF                  180 	mov	r7,a
   0054 E5 81               181 	mov	a,sp
   0056 24 FC               182 	add	a,#0xfc
   0058 F8                  183 	mov	r0,a
   0059 EE                  184 	mov	a,r6
   005A 66                  185 	xrl	a,@r0
   005B F6                  186 	mov	@r0,a
   005C EF                  187 	mov	a,r7
   005D 08                  188 	inc	r0
   005E 66                  189 	xrl	a,@r0
   005F F6                  190 	mov	@r0,a
                            191 ;	../../../contiki-sensinode//core/lib/crc16.c:61: acc ^= (acc & 0xff00) >> 5;
   0060 E5 81               192 	mov	a,sp
   0062 24 FC               193 	add	a,#0xfc
   0064 F8                  194 	mov	r0,a
   0065 7E 00               195 	mov	r6,#0x00
   0067 08                  196 	inc	r0
   0068 E6                  197 	mov	a,@r0
   0069 C4                  198 	swap	a
   006A 03                  199 	rr	a
   006B CE                  200 	xch	a,r6
   006C C4                  201 	swap	a
   006D 03                  202 	rr	a
   006E 54 07               203 	anl	a,#0x07
   0070 6E                  204 	xrl	a,r6
   0071 CE                  205 	xch	a,r6
   0072 54 07               206 	anl	a,#0x07
   0074 CE                  207 	xch	a,r6
   0075 6E                  208 	xrl	a,r6
   0076 CE                  209 	xch	a,r6
   0077 FF                  210 	mov	r7,a
   0078 E5 81               211 	mov	a,sp
   007A 24 FC               212 	add	a,#0xfc
   007C F8                  213 	mov	r0,a
   007D EE                  214 	mov	a,r6
   007E 66                  215 	xrl	a,@r0
   007F F6                  216 	mov	@r0,a
   0080 EF                  217 	mov	a,r7
   0081 08                  218 	inc	r0
   0082 66                  219 	xrl	a,@r0
   0083 F6                  220 	mov	@r0,a
                            221 ;	../../../contiki-sensinode//core/lib/crc16.c:62: return acc;
   0084 E5 81               222 	mov	a,sp
   0086 24 FC               223 	add	a,#0xfc
   0088 F8                  224 	mov	r0,a
   0089 86 82               225 	mov	dpl,@r0
   008B 08                  226 	inc	r0
   008C 86 83               227 	mov	dph,@r0
   008E 02s00r00            228 	ljmp	__sdcc_banked_ret
                            229 ;------------------------------------------------------------
                            230 ;Allocation info for local variables in function 'crc16_data'
                            231 ;------------------------------------------------------------
                            232 ;len                       Allocated to stack - sp -6
                            233 ;acc                       Allocated to stack - sp -8
                            234 ;data                      Allocated to registers 
                            235 ;i                         Allocated to stack - sp -1
                            236 ;------------------------------------------------------------
                            237 ;	../../../contiki-sensinode//core/lib/crc16.c:66: crc16_data(const unsigned char *data, int len, unsigned short acc)
                            238 ;	-----------------------------------------
                            239 ;	 function crc16_data
                            240 ;	-----------------------------------------
   0091                     241 _crc16_data:
   0091 05 81               242 	inc	sp
   0093 05 81               243 	inc	sp
   0095 AD 82               244 	mov	r5,dpl
   0097 AE 83               245 	mov	r6,dph
   0099 AF F0               246 	mov	r7,b
                            247 ;	../../../contiki-sensinode//core/lib/crc16.c:70: for(i = 0; i < len; ++i) {
   009B A8 81               248 	mov	r0,sp
   009D 18                  249 	dec	r0
   009E E4                  250 	clr	a
   009F F6                  251 	mov	@r0,a
   00A0 08                  252 	inc	r0
   00A1 F6                  253 	mov	@r0,a
   00A2                     254 00101$:
   00A2 A8 81               255 	mov	r0,sp
   00A4 18                  256 	dec	r0
   00A5 E5 81               257 	mov	a,sp
   00A7 24 FA               258 	add	a,#0xfa
   00A9 F9                  259 	mov	r1,a
   00AA C3                  260 	clr	c
   00AB E6                  261 	mov	a,@r0
   00AC 97                  262 	subb	a,@r1
   00AD 08                  263 	inc	r0
   00AE E6                  264 	mov	a,@r0
   00AF 64 80               265 	xrl	a,#0x80
   00B1 09                  266 	inc	r1
   00B2 87 F0               267 	mov	b,@r1
   00B4 63 F0 80            268 	xrl	b,#0x80
   00B7 95 F0               269 	subb	a,b
   00B9 50 4F               270 	jnc	00104$
                            271 ;	../../../contiki-sensinode//core/lib/crc16.c:71: acc = crc16_add(*data, acc);
   00BB 8D 82               272 	mov	dpl,r5
   00BD 8E 83               273 	mov	dph,r6
   00BF 8F F0               274 	mov	b,r7
   00C1 12s00r00            275 	lcall	__gptrget
   00C4 FA                  276 	mov	r2,a
   00C5 A3                  277 	inc	dptr
   00C6 AD 82               278 	mov	r5,dpl
   00C8 AE 83               279 	mov	r6,dph
   00CA C0 07               280 	push	ar7
   00CC C0 06               281 	push	ar6
   00CE C0 05               282 	push	ar5
   00D0 E5 81               283 	mov	a,sp
   00D2 24 F5               284 	add	a,#0xf5
   00D4 F8                  285 	mov	r0,a
   00D5 E6                  286 	mov	a,@r0
   00D6 C0 E0               287 	push	acc
   00D8 08                  288 	inc	r0
   00D9 E6                  289 	mov	a,@r0
   00DA C0 E0               290 	push	acc
   00DC 8A 82               291 	mov	dpl,r2
   00DE 78r00               292 	mov	r0,#_crc16_add
   00E0 79s00               293 	mov	r1,#(_crc16_add >> 8)
   00E2 7As00               294 	mov	r2,#(_crc16_add >> 16)
   00E4 12s00r00            295 	lcall	__sdcc_banked_call
   00E7 AA 82               296 	mov	r2,dpl
   00E9 AC 83               297 	mov	r4,dph
   00EB 15 81               298 	dec	sp
   00ED 15 81               299 	dec	sp
   00EF D0 05               300 	pop	ar5
   00F1 D0 06               301 	pop	ar6
   00F3 D0 07               302 	pop	ar7
   00F5 E5 81               303 	mov	a,sp
   00F7 24 F8               304 	add	a,#0xf8
   00F9 F8                  305 	mov	r0,a
   00FA A6 02               306 	mov	@r0,ar2
   00FC 08                  307 	inc	r0
   00FD A6 04               308 	mov	@r0,ar4
                            309 ;	../../../contiki-sensinode//core/lib/crc16.c:72: ++data;
                            310 ;	../../../contiki-sensinode//core/lib/crc16.c:70: for(i = 0; i < len; ++i) {
   00FF A8 81               311 	mov	r0,sp
   0101 18                  312 	dec	r0
   0102 06                  313 	inc	@r0
   0103 B6 00 02            314 	cjne	@r0,#0x00,00113$
   0106 08                  315 	inc	r0
   0107 06                  316 	inc	@r0
   0108                     317 00113$:
   0108 80 98               318 	sjmp	00101$
   010A                     319 00104$:
                            320 ;	../../../contiki-sensinode//core/lib/crc16.c:74: return acc;
   010A E5 81               321 	mov	a,sp
   010C 24 F8               322 	add	a,#0xf8
   010E F8                  323 	mov	r0,a
   010F 86 82               324 	mov	dpl,@r0
   0111 08                  325 	inc	r0
   0112 86 83               326 	mov	dph,@r0
   0114 15 81               327 	dec	sp
   0116 15 81               328 	dec	sp
   0118 02s00r00            329 	ljmp	__sdcc_banked_ret
                            330 	.area CSEG    (CODE)
                            331 	.area CONST   (CODE)
                            332 	.area XINIT   (CODE)
                            333 	.area CABS    (ABS,CODE)
